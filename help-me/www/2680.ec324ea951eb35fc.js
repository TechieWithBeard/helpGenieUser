"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2680],{2680:(N,h,s)=>{s.r(h),s.d(h,{CHomeModule:()=>X});var m=s(177),v=s(5260),g=(s(7043),s(9969)),e=s(3953),u=s(5037),f=s(4280),C=s(7777),y=s(5312),_=s(8826);let D=(()=>{var t;class r{constructor(i){this.httpService=i}getAllCategories(){return this.httpService.getWithToken(y.c.Server_URL+"category/getServiceCategory")}}return(t=r).\u0275fac=function(i){return new(i||t)(e.KVO(_.k))},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();var l=s(4742);function x(t,r){1&t&&e.nrm(0,"ion-progress-bar",0)}function P(t,r){if(1&t&&(e.EFF(0),e.nI1(1,"titlecase")),2&t){const n=e.XpG();e.SpI(" ",e.bMT(1,1,n.userData.displayName)," ")}}function b(t,r){if(1&t&&(e.j41(0,"div",6),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.SpI(" ",n.addressData[0].user_address," ")}}function M(t,r){if(1&t&&e.DNE(0,b,2,1,"div",12),2&t){const n=e.XpG();e.Y8G("ngIf",n.addressData)}}function S(t,r){if(1&t){const n=e.RV6();e.j41(0,"ion-card",14),e.bIt("click",function(){e.eBV(n);const o=e.XpG().$implicit,a=e.XpG();return e.Njj(a.selectService(o))}),e.nrm(1,"img",15),e.j41(2,"ion-card-header")(3,"ion-card-subtitle"),e.EFF(4),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.Y8G("ngClass",n.nearby?"near-enabled":""),e.R7$(),e.Y8G("src","../../../assets/icon/category/"+n.id+".webp",e.B4B),e.R7$(3),e.JRh(n.display_name)}}function O(t,r){1&t&&e.DNE(0,S,5,3,"ion-card",13),2&t&&e.Y8G("ngIf",r.$implicit.nearby)}let I=(()=>{var t;class r{constructor(i,o,a,c,d){this.categoryDetailService=i,this.storageService=o,this.router=a,this.userService=c,this.customerService=d,this.animationState="state1",this.placeholders=["Search for a genie","Type here","Try searching a service..."],this.currentPlaceholder=this.placeholders[0],this.placeholderIndex=0,this.addressData=[],this.loading=!0,this.categoryList=[],this.navigateToLogin=()=>{this.storageService.clearAll(),this.router.navigate(["/login"])},setInterval(()=>this.animatePlaceholders(),3e3)}ngOnInit(){this.storageService.get("user_data").then(i=>{i?(this.userData=JSON.parse(i),this.userId=this.userData.uid,this.userId&&this.loadInitialData()):this.navigateToLogin()}).catch(this.navigateToLogin)}loadInitialData(){this.getUserAddress(this.userId).then(i=>{i&&this.getNearbyServiceProviders(i)}),this.getAllActiveCategories()}animatePlaceholders(){this.placeholderIndex=(this.placeholderIndex+1)%this.placeholders.length,this.currentPlaceholder=this.placeholders[this.placeholderIndex],this.animationState="state1"===this.animationState?"state2":"state1"}selectService(i){this.router.navigate(["/home/service/category/"+i.name])}getAllActiveCategories(){this.customerService.getAllCategories().subscribe(i=>{this.loading=!1,this.categoryList=i.filter(o=>o.active)},i=>{this.loading=!1,console.error(i)})}getNearbyServiceProviders(i){this.categoryDetailService.getNearbyService(i.lat,i.lng).subscribe(o=>{if(o){const a=new Set(o.map(c=>c.service_provider_category));this.categoryList=this.categoryList.map(c=>({...c,nearby:a.has(c.name)})).sort((c,d)=>(d.nearby?1:0)-(c.nearby?1:0))}},o=>{console.error(o)})}getUserAddress(i){return new Promise((o,a)=>{this.userService.getUserAddress(i).subscribe(c=>{this.addressData=c;const d=this.addressData.find(p=>p.default);d?o(d.user_coordinates):a()},a)})}}return(t=r).\u0275fac=function(i){return new(i||t)(e.rXU(u.p),e.rXU(f.s),e.rXU(v.Ix),e.rXU(C.D),e.rXU(D))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-home"]],decls:15,vars:3,consts:[["type","indeterminate"],[1,"dashboard-main-container"],[1,"user-container"],[1,"user-avatar-container"],[1,"user-metadata-block"],[1,"name-container"],[1,"location-contaoiner"],[1,"main-frame"],[1,"dashboard-frame"],[1,"category-list-container"],[1,"category-list"],[3,"ngClass"],["class","location-contaoiner",4,"ngIf"],[3,"ngClass","click",4,"ngIf"],[3,"click","ngClass"],[1,"cat-image",3,"src"]],template:function(i,o){1&i&&(e.DNE(0,x,1,0,"ion-progress-bar",0),e.j41(1,"div",1)(2,"div",2),e.nrm(3,"div",3),e.j41(4,"div",4)(5,"div",5),e.EFF(6," \u{1f9de} Genie for, "),e.DNE(7,P,2,3),e.k0s(),e.DNE(8,M,1,1,"div",6),e.k0s()(),e.j41(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10),e.Z7z(13,O,1,1,"ion-card",11,e.Vm6),e.k0s()()()()()),2&i&&(e.vxM(o.loading?0:-1),e.R7$(7),e.vxM(o.userData?7:-1),e.R7$(),e.vxM(o.addressData.length>0?8:-1),e.R7$(5),e.Dyx(o.categoryList))},dependencies:[m.YU,m.bT,l.b_,l.ME,l.HW,l.FH,m.PV],styles:[".name-container[_ngcontent-%COMP%]{font-weight:bolder;font-size:1.2rem}.location-contaoiner[_ngcontent-%COMP%]{font-size:small}.category-list[_ngcontent-%COMP%]{display:grid;align-items:center;grid-template-columns:repeat(auto-fit,minmax(10rem,1fr))}.cat-image[_ngcontent-%COMP%]{width:100%;height:100px;max-height:100px;object-fit:scale-down}.user-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-content:center;align-items:center;column-gap:1rem}.user-metadata-block[_ngcontent-%COMP%]{display:flex;flex-direction:column}.user-icon-avatar[_ngcontent-%COMP%]{width:2.2rem;height:2.2rem}.main-condition-container[_ngcontent-%COMP%]{position:relative;bottom:0;display:flex;align-items:center;justify-content:center;width:100%}.near-enabled[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;max-width:12rem}"],data:{animation:[(0,g.hZ)("placeholderAnimation",[(0,g.wk)("state1",(0,g.iF)({opacity:1})),(0,g.wk)("state2",(0,g.iF)({opacity:1})),(0,g.kY)("state1 => state2",(0,g.i0)("500ms ease-in")),(0,g.kY)("state2 => state1",(0,g.i0)("500ms ease-out"))])]}}),r})();var F=s(8880),k=s(7788);function w(t,r){1&t&&e.nrm(0,"ion-progress-bar",5)}function H(t,r){1&t&&(e.j41(0,"div",6),e.nrm(1,"ion-icon",7),e.j41(2,"p"),e.EFF(3,"Genie near your location."),e.k0s()())}function j(t,r){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.SpI(" (",null==n.service_provider_review?null:n.service_provider_review.review.length," Reviews) ")}}function T(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",9),e.bIt("click",function(){const o=e.eBV(n).$implicit,a=e.XpG(2);return e.Njj(a.selectProvider(o))}),e.j41(1,"ion-card",10)(2,"ion-card-content")(3,"div",11)(4,"div",12)(5,"ion-thumbnail",13),e.nrm(6,"img",14),e.k0s()(),e.j41(7,"div",15)(8,"div",16),e.EFF(9),e.k0s(),e.j41(10,"div",17)(11,"ion-chip",18),e.EFF(12),e.k0s()(),e.j41(13,"div",19),e.nrm(14,"app-star-rating",20),e.DNE(15,j,2,1,"div",21),e.k0s()()()()()()}if(2&t){const n=r.$implicit;e.R7$(6),e.Y8G("alt",n.service_provider_name),e.R7$(3),e.SpI(" ",n.service_provider_name," "),e.R7$(3),e.SpI(" ",n.service_provider_category,""),e.R7$(2),e.Y8G("rating",n.service_provider_rating),e.R7$(),e.Y8G("ngIf",null==n.service_provider_review?null:n.service_provider_review.review)}}function G(t,r){if(1&t&&e.DNE(0,T,16,5,"div",8),2&t){const n=e.XpG();e.Y8G("ngForOf",n.serviceProviderData)}}function L(t,r){1&t&&(e.j41(0,"div",26)(1,"div",27),e.nrm(2,"ion-icon",28),e.j41(3,"p",29),e.EFF(4,"No Genie found near your Location"),e.k0s()()())}function R(t,r){if(1&t&&(e.j41(0,"div",4)(1,"div",23),e.nrm(2,"div",24),e.DNE(3,L,5,0,"div",25),e.k0s()()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngIf","LOADED"===n.providerLoadingStatus)}}const E=[{path:"",component:I,pathMatch:"full"},{path:"category",component:(()=>{var t;class r{constructor(){}ngOnInit(){}}return(t=r).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["app-category-home"]],decls:1,vars:0,template:function(i,o){1&i&&e.nrm(0,"router-outlet")},dependencies:[v.n3]}),r})(),children:[{path:":categoryID",component:(()=>{var t;class r{constructor(i,o,a,c,d,p){this.platform=i,this.userService=o,this.storage=a,this.router=c,this.route=d,this.categoryDetailService=p,this.openServiceDetail=!1,this.serviceProviderData=[],this.serviceList=[],this.openOrderSummaryDetail=!1,this.before_total=0,this.totalAmount=0,this.total=0,this.gst_charge=0,this.providerLoadingStatus="LOADING",this.DefaultaddressData=[]}ngOnInit(){var i,o;this.serviceProviderCategory=null===(i=this.route)||void 0===i||null===(i=i.snapshot)||void 0===i||null===(i=i.paramMap)||void 0===i?void 0:i.get("categoryID"),null===(o=this.storage.get("userid"))||void 0===o||o.then(a=>{a?this.getUserAddress(a).then(c=>{c&&this.getServiceProvidersData(c)}):console.log("invalid user")}),this.categoryDetailService.getTaxData().subscribe(a=>{console.log(a),this.taxData=a})}getServiceProvidersData(i){this.serviceProviderCategory&&(this.providerLoadingStatus="LOADING",this.categoryDetailService.getServiceProviders(this.serviceProviderCategory,i.lat,i.lng).subscribe(o=>{o&&(this.serviceProviderData=[...o],this.serviceList=[...o],console.log(this.serviceList),this.providerLoadingStatus="LOADED")},o=>{this.providerLoadingStatus="ERROR",this.serviceProviderData=[],this.serviceList=[]}))}selectProvider(i){this.router.navigateByUrl("/home/service/provider/"+i.service_provider_id)}wait(i){return new Promise(o=>setTimeout(o,i))}navigateTohome(){this.router.navigate(["/home"])}getUserAddress(i){return new Promise((o,a)=>{this.userService.getUserAddress(i).subscribe(c=>{this.DefaultaddressData=c;let d=this.DefaultaddressData.find(p=>p.default);d?o(d.user_coordinates):a(),console.log(this.DefaultaddressData)},c=>{a(),console.log(c)})})}onWillDismiss(i){this.openOrderSummaryDetail=!1}cancel(){this.selectedProviderData=void 0}}return(t=r).\u0275fac=function(i){return new(i||t)(e.rXU(F.OD),e.rXU(C.D),e.rXU(f.s),e.rXU(v.Ix),e.rXU(v.nX),e.rXU(u.p))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-category-detail"]],decls:5,vars:3,consts:[["type","indeterminate",4,"ngIf"],["class","location-note",4,"ngIf"],[1,"service-provider-block"],[1,"provider-block"],[1,"no-provider-found-block"],["type","indeterminate"],[1,"location-note"],["name","location"],["class","provider-block",3,"click",4,"ngFor","ngForOf"],[1,"provider-block",3,"click"],[1,"provider-card"],[1,"provider-detail-block"],[1,"p-image-block"],["slot","start"],["src","../../../assets/icon/category/provider.webp",3,"alt"],[1,"content-block"],[1,"p-name-block"],[1,"p-category-block"],["color","primary"],[1,"rating-container"],[3,"rating"],["class","total-review-container",4,"ngIf"],[1,"total-review-container"],[1,"not-found-container"],[1,"nf-img-container"],["class","nf-text-container",4,"ngIf"],[1,"nf-text-container"],[1,"no-genie-container"],["name","alert-circle-outline",1,"no-genie-icon"],[1,"no-genie-message"]],template:function(i,o){1&i&&(e.DNE(0,w,1,0,"ion-progress-bar",0)(1,H,4,0,"div",1),e.j41(2,"div",2),e.DNE(3,G,1,1,"div",3)(4,R,4,1,"div",4),e.k0s()),2&i&&(e.Y8G("ngIf","LOADING"===o.providerLoadingStatus),e.R7$(),e.Y8G("ngIf","LOADED"===o.providerLoadingStatus&&o.serviceProviderData.length>0),e.R7$(2),e.vxM(o.serviceProviderData.length>0?3:4))},dependencies:[m.Sq,m.bT,l.b_,l.I9,l.ZB,l.iq,l.FH,l.Zx,k.V],styles:[".provider-detail-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;column-gap:1rem}ion-thumbnail[_ngcontent-%COMP%]{--size: 80px;--border-radius: 14px}.content-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.item-counter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.3rem}.ionic-icons[_ngcontent-%COMP%]{height:2rem}.quantity-container[_ngcontent-%COMP%]{width:1rem}.quantity_btn[_ngcontent-%COMP%]{display:grid;grid-template-columns:2rem 2rem 2rem;align-items:center;justify-items:center;align-content:center}.provider_title[_ngcontent-%COMP%]{text-align:center}.review-container[_ngcontent-%COMP%]{display:flex;row-gap:.5rem;flex-direction:column}.no-provider-found-block[_ngcontent-%COMP%], .not-found-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;align-content:center;flex-direction:column}.nf-text-container[_ngcontent-%COMP%]{font-size:large}.p-name-block[_ngcontent-%COMP%]{font-size:large;font-weight:700}.rating-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;column-gap:1rem;align-items:center}.provider-card[_ngcontent-%COMP%]{max-width:30rem}.review-container-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;row-gap:1rem;width:100%;background:#e3f2fd;border-radius:.5rem;padding:.5rem;margin:.1rem}.review-user-detail-slot[_ngcontent-%COMP%]{display:flex;flex-direction:row;column-gap:1rem}.review-ser-rating[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.rating-star[_ngcontent-%COMP%]{color:#ffb74d}.location-note[_ngcontent-%COMP%]{background-color:#2e7d32;color:#fff;padding:10px;text-align:center;display:flex;height:2rem;align-items:center;justify-content:center}.location-note[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:5px}.no-genie-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.no-genie-icon[_ngcontent-%COMP%]{font-size:4rem;color:#f44336}.no-genie-message[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-top:1rem;text-align:center}"]}),r})()}]},{path:"provider/:providerID",loadChildren:()=>s.e(2766).then(s.bind(s,2766)).then(t=>t.ProviderDetailPageModule)}];let $=(()=>{var t;class r{}return(t=r).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[v.iI.forChild(E),v.iI]}),r})();var U=s(1051),A=s(369);let X=(()=>{var t;class r{}return(t=r).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({providers:[A.w],imports:[m.MD,$,l.bv,U.a]}),r})()}}]);