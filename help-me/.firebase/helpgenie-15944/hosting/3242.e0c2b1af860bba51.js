"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3242],{3242:(Je,k,f)=>{f.r(k),f.d(k,{CHomeModule:()=>Be});var h=f(6814),w=f(4091),_=(f(8475),f(6825)),e=f(9212),O=f(5971),b=f(2095),R=f(2105),I=f(9894),P=f(553),q=f(4785);let J=(()=>{var t;class o{constructor(n){this.httpService=n}getAllCategories(){return this.httpService.getWithToken(P.N.Server_URL+"category/getServiceCategory")}}return(t=o).\u0275fac=function(n){return new(n||t)(e.LFG(q.O))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),o})();var d=f(3282);function Y(t,o){1&t&&e._UZ(0,"ion-progress-bar",0)}function H(t,o){if(1&t&&(e.TgZ(0,"div",12),e._uU(1),e.qZA()),2&t){const r=e.oxw();e.xp6(),e.hij(" ",r.getDefaultAddress(r.addressData)," ")}}function E(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"ion-card",13),e.NdJ("click",function(){const a=e.CHM(r).$implicit,s=e.oxw();return e.KtG(s.selectetService(a))}),e._UZ(1,"img",14),e.TgZ(2,"ion-card-header")(3,"ion-card-subtitle"),e._uU(4),e.qZA()()()}if(2&t){const r=o.$implicit;e.Q6J("disabled",!r.nearby)("ngClass",r.nearby?"near-enabled":""),e.xp6(),e.Q6J("src","../../../assets/icon/category/"+r.id+".webp",e.LSH),e.xp6(3),e.Oqu(r.display_name)}}let G=(()=>{var t;class o{constructor(n,i,a,s,c,l,m){this.categoryDetailService=n,this.storage=i,this.storageService=a,this.router=s,this.firebaseService=c,this.userService=l,this.customerService=m,this.animationState="state1",this.placeholders=["Search for a genie","Type here","Try searching a service..."],this.currentPlaceholder=this.placeholders[0],this.placeholderIndex=0,this.addressData=[],this.loading=!0,this.categoryList=[],setInterval(()=>{this.animatePlaceholders()},3e3)}ngOnInit(){this.storageService.get("user_data").then(n=>{n?(this.userData=JSON.parse(n),this.userData&&(console.log(this.userData),this.userId=this.userData.uid,this.userId&&(this.getUserAddress(this.userId),this.getCategoryData(),this.getAllActiveCategory()))):this.router.navigate(["/login"])}).catch(n=>{console.error(n),this.router.navigate(["/login"])})}getCategoryData(){var n;null===(n=this.storage.get("userid"))||void 0===n||n.then(i=>{i?this.getUserAddress(i).then(a=>{a&&this.getServiceProvidersData(a)}):console.log("invalid user")})}animatePlaceholders(){this.placeholderIndex=(this.placeholderIndex+1)%this.placeholders.length,this.currentPlaceholder=this.placeholders[this.placeholderIndex],this.animationState="state1"===this.animationState?"state2":"state1"}selectetService(n){console.log(n),this.router.navigate(["/home/service/category/"+n.name])}getAllActiveCategory(){this.customerService.getAllCategories().subscribe(n=>{this.loading=!1,this.categoryList=[...n.filter(i=>1==i.active)]},n=>{this.loading=!1,console.error(n)})}getServiceProvidersData(n){this.categoryDetailService.getNearbyService(n.lat,n.lng).subscribe(i=>{if(i){console.log(i);const a=Array.from(new Set(i.map(s=>s.service_provider_category))).map(s=>{var c;return null===(c=i.find(l=>l.service_provider_category===s))||void 0===c?void 0:c.service_provider_category});console.log(a),this.categoryList.forEach(s=>{a.includes(s.name)&&(s.nearby=!0)}),this.categoryList.sort((s,c)=>(c.nearby?1:0)-(s.nearby?1:0))}},i=>{console.log(i)})}getUserAddress(n){return new Promise((i,a)=>{this.userService.getUserAddress(n).subscribe(s=>{this.addressData=s;let c=this.addressData.find(l=>l.default);c?i(c.user_coordinates):a(),console.log(this.addressData)},s=>{a(),console.log(s)})})}getDefaultAddress(n){return n[n.findIndex(i=>i.default)].user_address}}return(t=o).\u0275fac=function(n){return new(n||t)(e.Y36(O.D),e.Y36(b.K),e.Y36(b.K),e.Y36(w.F0),e.Y36(R.$),e.Y36(I.K),e.Y36(J))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-home"]],decls:14,vars:6,consts:[["type","indeterminate"],[1,"dashboard-main-container"],[1,"user-container"],[1,"user-avatar-container"],[1,"user-metadata-block"],[1,"name-container"],["class","location-contaoiner",4,"ngIf"],[1,"main-frame"],[1,"dashboard-frame"],[1,"category-list-container"],[1,"category-list"],[3,"disabled","ngClass","click",4,"ngFor","ngForOf"],[1,"location-contaoiner"],[3,"disabled","ngClass","click"],[1,"cat-image",3,"src"]],template:function(n,i){1&n&&(e.YNc(0,Y,1,0,"ion-progress-bar",0),e.TgZ(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"div",5),e._uU(6),e.ALo(7,"titlecase"),e.qZA(),e.YNc(8,H,2,1,"div",6),e.qZA()(),e.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10),e.YNc(13,E,5,4,"ion-card",11),e.qZA()()()()()),2&n&&(e.um2(0,i.loading?0:-1),e.xp6(6),e.hij(" \u{1f9de} Genie for, ",e.lcZ(7,4,null==i.userData?null:i.userData.displayName)," "),e.xp6(2),e.Q6J("ngIf",i.addressData.length>0),e.xp6(5),e.Q6J("ngForOf",i.categoryList))},dependencies:[h.mk,h.sg,h.O5,d.PM,d.Zi,d.tO,d.X7,h.rS],styles:[".name-container[_ngcontent-%COMP%]{font-weight:bolder;font-size:1.2rem}.location-contaoiner[_ngcontent-%COMP%]{font-size:small}.category-list[_ngcontent-%COMP%]{display:grid;align-items:center;grid-template-columns:repeat(auto-fit,minmax(10rem,1fr))}.cat-image[_ngcontent-%COMP%]{width:100%;height:100px;max-height:100px;object-fit:scale-down}.user-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-content:center;align-items:center;column-gap:1rem}.user-metadata-block[_ngcontent-%COMP%]{display:flex;flex-direction:column}.user-icon-avatar[_ngcontent-%COMP%]{width:2.2rem;height:2.2rem}.main-condition-container[_ngcontent-%COMP%]{position:relative;bottom:0;display:flex;align-items:center;justify-content:center;width:100%}"],data:{animation:[(0,_.X$)("placeholderAnimation",[(0,_.SB)("state1",(0,_.oB)({opacity:1})),(0,_.SB)("state2",(0,_.oB)({opacity:1})),(0,_.eR)("state1 => state2",(0,_.jt)("500ms ease-in")),(0,_.eR)("state2 => state1",(0,_.jt)("500ms ease-out"))])]}}),o})();var T=f(5861),W=f(5592),$=f(2438),z={error:"cordova_not_available"},K={error:"plugin_not_installed"};function D(t){if(typeof window<"u"&&window.angular){var r=window.document,n=window.angular.element(r.querySelector("[ng-app]")||r.body).injector();if(n)return n.get("$q")(function(a,s){t(a,s)});console.warn("Angular 1 was detected but $q couldn't be retrieved. This is usually when the app is not bootstrapped on the html or body tag. Falling back to native promises which won't trigger an automatic digest when promises resolve.")}return function(){if(Promise)return new Promise(function(a,s){t(a,s)});console.error("No Promise support or polyfill found. To enable Ionic Native support, please add the es6-promise polyfill before this script, or run with a library like Angular or on a recent browser.")}()}function F(t,o,r){var n,i;"string"==typeof t?n=t:(n=t.constructor.getPluginRef(),r=t.constructor.getPluginName(),i=t.constructor.getPluginInstallName());var a=B(n);return!(!a||o&&typeof a[o]>"u")||(typeof window>"u"||!window.cordova?(function oe(t,o){typeof process>"u"&&console.warn(o?"Native: tried calling "+t+"."+o+", but Cordova is not available. Make sure to include cordova.js or run in a device/simulator":"Native: tried accessing the "+t+" plugin but Cordova is not available. Make sure to include cordova.js or run in a device/simulator")}(r,o),z):(function ne(t,o,r){console.warn(r?"Native: tried calling "+t+"."+r+", but the "+t+" plugin is not installed.":"Native: tried accessing the "+t+" plugin but it's not installed."),o&&console.warn("Install the "+t+" plugin: 'ionic cordova plugin add "+o+"'")}(r,i,o),K))}function C(t,o,r,n,i,a){void 0===n&&(n={}),r=function M(t,o,r,n){if(void 0===o&&(o={}),o.sync)return t;if("reverse"===o.callbackOrder)t.unshift(n),t.unshift(r);else if("node"===o.callbackStyle)t.push(function(c,l){c?n(c):r(l)});else if("object"===o.callbackStyle&&o.successName&&o.errorName){var i={};i[o.successName]=r,i[o.errorName]=n,t.push(i)}else if(typeof o.successIndex<"u"||typeof o.errorIndex<"u"){var a=function(){o.successIndex>t.length?t[o.successIndex]=r:t.splice(o.successIndex,0,r)},s=function(){o.errorIndex>t.length?t[o.errorIndex]=n:t.splice(o.errorIndex,0,n)};o.successIndex>o.errorIndex?(s(),a()):(a(),s())}else t.push(r),t.push(n);return t}(r,n,i,a);var s=F(t,o);if(!0===s){var c=B(t.constructor.getPluginRef());return c[o].apply(c,r)}return s}function B(t){return typeof window<"u"?U(window,t):null}function U(t,o){for(var r=o.split("."),n=t,i=0;i<r.length;i++){if(!n)return null;n=n[r[i]]}return n}var ae=function(){function t(){}return t.installed=function(){return!0===F(this.pluginRef)},t.getPlugin=function(){return typeof window<"u"?function ie(t,o){for(var r=o.split("."),n=t,i=0;i<r.length;i++){if(!n)return null;n=n[r[i]]}return n}(window,this.pluginRef):null},t.getPluginName=function(){return this.pluginName},t.getPluginRef=function(){return this.pluginRef},t.getPluginInstallName=function(){return this.plugin},t.getSupportedPlatforms=function(){return this.platforms},t.pluginName="",t.pluginRef="",t.plugin="",t.repo="",t.platforms=[],t.install="",t}();function A(t,o,r,n){return function(t,o,r){return void 0===r&&(r={}),function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return r.sync?C(t,o,n,r):r.observable?function V(t,o,r,n){return void 0===n&&(n={}),new W.y(function(i){var a;return a=n.destruct?C(t,o,r,n,function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return i.next(s)},function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return i.error(s)}):C(t,o,r,n,i.next.bind(i),i.error.bind(i)),a&&a.error&&(i.error(a.error),i.complete()),function(){try{if(n.clearFunction)return n.clearWithArgs?C(t,n.clearFunction,r,n,i.next.bind(i),i.error.bind(i)):C(t,n.clearFunction,[])}catch(s){console.warn("Unable to clear the previous observable watch for",t.constructor.getPluginName(),o),console.warn(s)}}})}(t,o,n,r):r.eventObservable&&r.event?function ee(t,o){return o=typeof window<"u"&&o?U(window,o):o||(typeof window<"u"?window:{}),(0,$.R)(o,t)}(r.event,r.element):r.otherPromise?function j(t,o,r,n){return void 0===n&&(n={}),D(function(i,a){var s=C(t,o,r,n);s?s.error?a(s.error):s.then&&s.then(i).catch(a):a({error:"unexpected_error"})})}(t,o,n,r):function X(t,o,r,n){void 0===n&&(n={});var i,a,s=D(function(c,l){i=n.destruct?C(t,o,r,n,function(){for(var m=[],u=0;u<arguments.length;u++)m[u]=arguments[u];return c(m)},function(){for(var m=[],u=0;u<arguments.length;u++)m[u]=arguments[u];return l(m)}):C(t,o,r,n,c,l),a=l});return i&&i.error&&(s.catch(function(){}),"function"==typeof a&&a(i.error)),s}(t,o,n,r)}}(t,o,r).apply(this,n)}!function Q(){if(typeof process>"u"){var t=typeof window<"u"?window:{},r=Date.now(),n=!1;t.document.addEventListener("deviceready",function(){console.log("Ionic Native: deviceready event fired after "+(Date.now()-r)+" ms"),n=!0}),setTimeout(function(){!n&&t.cordova&&console.warn("Ionic Native: deviceready did not fire within 5000ms. This can happen when plugins are in an inconsistent state. Try removing plugins from plugins/ and reinstalling them.")},5e3)}}();var ce=function(){var t=function(o,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])})(o,r)};return function(o,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=o}t(o,r),o.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Z=function(t){return t.PRODUCTION="PRODUCTION",t.SANDBOX="SANDBOX",t}(Z||{}),le=function(){return function t(o,r,n){if(null===o||""===o.trim())throw new Error("sessionID cannot be empty");if(null===r||""===r.trim())throw new Error("orderID cannot be empty");if(null===n||""===n.trim())throw new Error("environment cannot be empty");this.payment_session_id=o,this.orderID=r,this.environment=Z[n]}}(),x=function(t){return t.CARD="CARD",t.UPI="UPI",t.NB="NB",t.WALLET="WALLET",t.EMI="EMI",t.PAY_LATER="PAY_LATER",t.PAYPAL="PAYPAL",t}(x||{}),ue=function(){function t(){this.hashset=new Set}return t.prototype.enableAllModes=function(){this.hashset.add(x.CARD),this.hashset.add(x.UPI),this.hashset.add(x.NB),this.hashset.add(x.WALLET),this.hashset.add(x.EMI),this.hashset.add(x.PAY_LATER),this.hashset.add(x.PAYPAL)},t.prototype.build=function(){return 0===this.hashset.size&&this.enableAllModes(),{hashset:this.hashset}},t.prototype.add=function(o){return this.hashset.add(o),this},t}(),N=function(){function t(){this.navigationBarBackgroundColor="#6A3FD3",this.navigationBarTextColor="#FFFFFF",this.buttonBackgroundColor="#6A3FD3",this.buttonTextColor="#FFFFFF",this.backgroundColor="#FFFFFF",this.primaryTextColor="#11385b",this.secondaryTextColor="#808080"}return t.prototype.setNavigationBarBackgroundColor=function(o){return this.navigationBarBackgroundColor=o,this},t.prototype.setNavigationBarTextColor=function(o){return this.navigationBarTextColor=o,this},t.prototype.setButtonBackgroundColor=function(o){return this.buttonBackgroundColor=o,this},t.prototype.setButtonTextColor=function(o){return this.buttonTextColor=o,this},t.prototype.setPrimaryTextColor=function(o){return this.primaryTextColor=o,this},t.prototype.setSecondaryTextColor=function(o){return this.secondaryTextColor=o,this},t.prototype.setBackgroundColor=function(o){return this.backgroundColor=o,this},t.prototype.build=function(){return{navigationBarBackgroundColor:this.navigationBarBackgroundColor,navigationBarTextColor:this.navigationBarTextColor,buttonBackgroundColor:this.buttonBackgroundColor,backgroundColor:this.backgroundColor,buttonTextColor:this.buttonTextColor,primaryTextColor:this.primaryTextColor,secondaryTextColor:this.secondaryTextColor}},t}(),de=function(){function t(){this.navigationBarBackgroundColor="#6A3FD3",this.navigationBarTextColor="#FFFFFF"}return t.prototype.setNavigationBarBackgroundColor=function(o){return this.navigationBarBackgroundColor=o,this},t.prototype.setNavigationBarTextColor=function(o){return this.navigationBarTextColor=o,this},t.prototype.build=function(){var o=(new N).build();return{buttonBackgroundColor:o.buttonBackgroundColor,buttonTextColor:o.buttonTextColor,navigationBarBackgroundColor:this.navigationBarBackgroundColor,navigationBarTextColor:this.navigationBarBackgroundColor,secondaryTextColor:o.secondaryTextColor,backgroundColor:o.backgroundColor,primaryTextColor:o.buttonTextColor}},t}(),ge=(function(){function t(o,r,n){this.components=Array.from((new ue).build().hashset),this.theme=(new N).build(),this.session=o,null!==r&&(this.components=Array.from(r.hashset)),null!==n&&(this.theme=n)}t.prototype.getSession=function(){return this.session},t.prototype.getComponents=function(){return this.components},t.prototype.getTheme=function(){return this.theme}}(),function(){function t(o,r){this.theme=(new de).build(),this.session=o,null!==r&&(this.theme=r)}return t.prototype.getSession=function(){return this.session},t.prototype.getTheme=function(){return this.theme},t}()),L=new(function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return ce(o,t),o.prototype.doDropPayment=function(r){return A(this,"doDropPayment",{},arguments)},o.prototype.doWebCheckoutPayment=function(r){return A(this,"doWebCheckoutPayment",{},arguments)},o.prototype.setCallback=function(r){return A(this,"setCallback",{},arguments)},o.pluginName="CFPaymentGateway",o.plugin="cordova-plugin-cashfree-pg",o.pluginRef="CFPaymentGateway",o.repo="https://github.com/cashfree/cordova-plugin-cashfree",o.platforms=["Android","iOS"],o}(ae)),fe=f(5897);function ve(t,o){1&t&&e._UZ(0,"ion-progress-bar",7)}function he(t,o){1&t&&(e.TgZ(0,"div",8),e._UZ(1,"ion-icon",9),e.TgZ(2,"p"),e._uU(3,"Genie near your location."),e.qZA()())}function pe(t,o){if(1&t&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&t){const r=e.oxw().$implicit;e.xp6(),e.hij(" (",null==r.service_provider_review?null:r.service_provider_review.review.length," Reviews) ")}}function _e(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"div",11),e.NdJ("click",function(){const a=e.CHM(r).$implicit,s=e.oxw(2);return e.KtG(s.selectProvider(a))}),e.TgZ(1,"ion-card",12)(2,"ion-card-content")(3,"div",13)(4,"div",14)(5,"ion-thumbnail",15),e._UZ(6,"img",16),e.qZA()(),e.TgZ(7,"div",17)(8,"div",18),e._uU(9),e.qZA(),e.TgZ(10,"div",19)(11,"ion-chip",20),e._uU(12),e.qZA()(),e.TgZ(13,"div",21),e.YNc(14,pe,2,1,"div",22),e.qZA()()()()()()}if(2&t){const r=o.$implicit;e.xp6(6),e.Q6J("alt",r.service_provider_name),e.xp6(3),e.hij(" ",r.service_provider_name," "),e.xp6(3),e.hij(" ",r.service_provider_category,""),e.xp6(2),e.Q6J("ngIf",null==r.service_provider_review?null:r.service_provider_review.review)}}function ye(t,o){if(1&t&&e.YNc(0,_e,15,4,"div",10),2&t){const r=e.oxw();e.Q6J("ngForOf",r.serviceProviderData)}}function Ce(t,o){1&t&&(e.TgZ(0,"div",28)(1,"div",29),e._UZ(2,"ion-icon",30),e.TgZ(3,"p",31),e._uU(4,"No Genie found near your Location"),e.qZA()()())}function xe(t,o){if(1&t&&(e.TgZ(0,"div",24)(1,"div",25),e._UZ(2,"div",26),e.YNc(3,Ce,5,0,"div",27),e.qZA()()),2&t){const r=e.oxw();e.xp6(3),e.Q6J("ngIf","LOADED"==r.providerLoadingStatus)}}function we(t,o){if(1&t&&(e.TgZ(0,"ion-item")(1,"div",40)(2,"div",41),e._uU(3),e.ALo(4,"titlecase"),e.qZA()(),e.TgZ(5,"div",42),e._uU(6),e.ALo(7,"currency"),e.qZA()()),2&t){const r=o.$implicit;e.xp6(3),e.hij(" ",e.lcZ(4,2,r.service_name)," "),e.xp6(3),e.hij(" ",e.xi3(7,4,r.rate,"INR")," ")}}function De(t,o){if(1&t&&(e.TgZ(0,"div",38)(1,"ion-list")(2,"ion-list-header")(3,"ion-label"),e._uU(4,"Services"),e.qZA()(),e.YNc(5,we,8,7,"ion-item",39),e.qZA()()),2&t){const r=e.oxw(2);e.xp6(5),e.Q6J("ngForOf",r.selectedProviderData.service_provider_domain)}}function be(t,o){if(1&t&&(e.TgZ(0,"ion-item")(1,"div",45)(2,"div",46)(3,"ion-avatar"),e._UZ(4,"img",47),e.qZA(),e.TgZ(5,"div",48)(6,"div",49),e._uU(7),e.qZA(),e.TgZ(8,"div",50),e._UZ(9,"ion-icon",51),e._uU(10),e.qZA()()(),e.TgZ(11,"div",52),e._uU(12),e.qZA()()()),2&t){const r=o.$implicit;e.xp6(7),e.hij(" ",r.name," "),e.xp6(3),e.hij(" ",r.rating," "),e.xp6(2),e.hij(" ",r.description," ")}}function Pe(t,o){if(1&t&&(e.TgZ(0,"div",43)(1,"ion-list",44)(2,"ion-list-header")(3,"ion-label"),e._uU(4,"Reviews"),e.qZA()(),e.YNc(5,be,13,3,"ion-item",39),e.qZA()()),2&t){const r=e.oxw(2);e.xp6(),e.Q6J("inset",!0),e.xp6(4),e.Q6J("ngForOf",null==r.selectedProviderData||null==r.selectedProviderData.service_provider_review?null:r.selectedProviderData.service_provider_review.review)}}function Te(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",15)(3,"ion-button",32),e.NdJ("click",function(){e.CHM(r);const i=e.oxw();return e.KtG(i.cancel())}),e._uU(4,"Cancel"),e.qZA()(),e.TgZ(5,"ion-title",33),e._uU(6),e.qZA()()(),e.TgZ(7,"ion-content",34)(8,"div",35),e.YNc(9,De,6,1,"div",36),e.TgZ(10,"ion-button",32),e.NdJ("click",function(){e.CHM(r);const i=e.oxw();return e.KtG(i.bookAppointment(i.selectedProviderData))}),e._uU(11),e.ALo(12,"currency"),e.qZA(),e.YNc(13,Pe,6,2,"div",37),e.qZA()()}if(2&t){const r=e.oxw();e.xp6(6),e.Oqu(r.selectedProviderData.service_provider_name),e.xp6(3),e.Q6J("ngIf",r.selectedProviderData.service_provider_domain),e.xp6(2),e.hij("Schedule Appointment for ",e.xi3(12,4,r.selectedProviderData.consultation_fees,"INR"),""),e.xp6(2),e.um2(13,(null==r.selectedProviderData||null==r.selectedProviderData.service_provider_review?null:r.selectedProviderData.service_provider_review.review.length)>0?13:-1)}}function Ae(t,o){if(1&t&&(e.TgZ(0,"ion-item",64)(1,"div",65),e._uU(2),e.qZA(),e.TgZ(3,"div",66)(4,"div",67),e._uU(5),e.qZA(),e.TgZ(6,"div",68),e._uU(7," x "),e.qZA(),e.TgZ(8,"div",69),e._uU(9),e.qZA(),e.TgZ(10,"div",70),e._uU(11),e.ALo(12,"number"),e.qZA()()()),2&t){const r=o.$implicit;e.xp6(2),e.hij(" ",r.service_name," "),e.xp6(3),e.hij(" ",r.count," "),e.xp6(4),e.hij(" ",r.rate," "),e.xp6(2),e.hij(" ",e.xi3(12,4,r.total_price,"1.2-2")," ")}}function Ze(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",15)(3,"ion-button",32),e.NdJ("click",function(){e.CHM(r);const i=e.oxw();return e.KtG(i.closeSummary())}),e._uU(4,"Cancel"),e.qZA()(),e.TgZ(5,"ion-title",33),e._uU(6,"Summary"),e.qZA(),e.TgZ(7,"ion-buttons",53)(8,"ion-button",54),e.NdJ("click",function(){e.CHM(r);const i=e.oxw();return e.KtG(i.confirmPayment())}),e._uU(9,"Checkout"),e.qZA()()()(),e.TgZ(10,"ion-content",34)(11,"div",55)(12,"div",56)(13,"ion-list")(14,"ion-item-group")(15,"div",57)(16,"div",58),e.YNc(17,Ae,13,7,"ion-item",59),e.TgZ(18,"ion-item-divider")(19,"ion-label"),e._uU(20," Payment Summary "),e.qZA()(),e.TgZ(21,"ion-item")(22,"div",60)(23,"b"),e._uU(24,"Item total"),e.qZA()(),e.TgZ(25,"div",61),e._uU(26),e.ALo(27,"currency"),e.qZA()(),e.TgZ(28,"ion-item")(29,"div",60)(30,"b"),e._uU(31,"Taxes and Fee"),e.qZA()(),e.TgZ(32,"div",61),e._uU(33),e.ALo(34,"currency"),e.qZA()(),e.TgZ(35,"ion-item")(36,"div",60)(37,"b"),e._uU(38,"Total"),e.qZA()(),e.TgZ(39,"div",61),e._uU(40),e.ALo(41,"currency"),e.qZA()()()()()(),e.TgZ(42,"ion-item")(43,"div",62),e._uU(44," Service date "),e.qZA(),e._UZ(45,"ion-datetime-button",63),e.qZA()()()()}if(2&t){const r=e.oxw();e.xp6(8),e.Q6J("strong",!0),e.xp6(9),e.Q6J("ngForOf",r.service_data_list),e.xp6(9),e.hij(" ",e.xi3(27,5,r.before_total,"INR")," "),e.xp6(7),e.hij(" ",e.xi3(34,8,r.gst_charge,"INR")," "),e.xp6(7),e.hij(" ",e.xi3(41,11,r.total,"INR")," ")}}function Se(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"ion-datetime",71),e.NdJ("ionChange",function(i){e.CHM(r);const a=e.oxw();return e.KtG(a.dateChanged(i))}),e.qZA()}if(2&t){const r=e.oxw();e.Q6J("showDefaultButtons",!0)("value",r.min_date)("min",r.min_date)("max",r.max_date)}}const ke=()=>[0,.25,.5,.75],Oe=[{path:"",component:G,pathMatch:"full"},{path:"category",component:(()=>{var t;class o{constructor(){}ngOnInit(){}}return(t=o).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-category-home"]],decls:1,vars:0,template:function(n,i){1&n&&e._UZ(0,"router-outlet")},dependencies:[w.lC]}),o})(),children:[{path:":categoryID",component:(()=>{var t;class o{constructor(n,i,a,s,c,l,m){this.loadingCtrl=n,this.platform=i,this.userService=a,this.storage=s,this.router=c,this.route=l,this.categoryDetailService=m,this.scheduleDate=(new Date).toString(),this.openServiceDetail=!1,this.serviceProviderData=[],this.serviceList=[],this.openOrderSummaryDetail=!1,this.service_data_list=[],this.before_total=0,this.totalAmount=0,this.total=0,this.gst_charge=0,this.min_date=(new Date).toISOString(),this.max_date=new Date((new Date).getTime()+2592e6).toISOString(),this.providerLoadingStatus="LOADING",this.DefaultaddressData=[],console.log(this.max_date,this.min_date)}ngOnInit(){var n,i;this.serviceProviderCategory=null===(n=this.route)||void 0===n||null===(n=n.snapshot)||void 0===n||null===(n=n.paramMap)||void 0===n?void 0:n.get("categoryID"),null===(i=this.storage.get("userid"))||void 0===i||i.then(a=>{a?this.getUserAddress(a).then(s=>{s&&this.getServiceProvidersData(s)}):console.log("invalid user")}),this.categoryDetailService.getTaxData().subscribe(a=>{console.log(a),this.taxData=a})}getServiceProvidersData(n){this.serviceProviderCategory&&(this.providerLoadingStatus="LOADING",this.categoryDetailService.getServiceProviders(this.serviceProviderCategory,n.lat,n.lng).subscribe(i=>{i&&(this.serviceProviderData=[...i],this.serviceList=[...i],console.log(this.serviceList),this.providerLoadingStatus="LOADED")},i=>{this.providerLoadingStatus="ERROR",this.serviceProviderData=[],this.serviceList=[]}))}increaseCount(n){console.log(this.service_data_list);let i=this.service_data_list.findIndex(a=>a==n);i>=0?this.service_data_list[i].count++:(n.count++,this.service_data_list.push(n))}decreaseCount(n){let i=this.service_data_list.findIndex(a=>a==n);i>=0&&this.service_data_list.splice(i,1),n.count>0&&n.count--}selectProvider(n){this.categoryDetailService.getTaxData().subscribe(i=>{console.log(i),this.taxData=i}),this.openServiceDetail=!0,this.selectedProviderData=n,this.selectedProviderData.service_provider_domain.map(i=>(i.count=0,i)),console.log(this.selectedProviderData)}confirm(){if(null==this.taxData)return void console.log("unable to fetch tax data");console.log(this.service_data_list),this.service_data_list.map(c=>(c.total_price=c.count*c.rate,c));const n=this.service_data_list.reduce((c,l)=>c+l.total_price,0),i=Math.round(100*n)/100,a=i*this.taxData.Tax/100,s=this.taxData.service_charge;this.before_total=i,this.gst_charge=a+s,this.total=Math.floor(i+a+s),this.totalAmount=i,this.openOrderSummaryDetail=!0}cancel(){this.openServiceDetail=!1,this.selectedProviderData=void 0}onWillDismiss(n){this.openOrderSummaryDetail=!1}closeSummary(){this.openOrderSummaryDetail=!1}dateChanged(n){console.log(n),console.log(n.detail.value),this.scheduleDate=n.detail.value}confirmPayment(){var n=this;return(0,T.Z)(function*(){n.showLoading();let i=yield n.storage.get("userDetails");if(i){let a={order_value:n.total,order_provider_value:n.totalAmount,order_items:n.service_data_list,order_user_id:i.user_id,order_genie_id:n.selectedProviderData.service_provider_id,order_date:new Date(n.scheduleDate),order_status:"Initiated",order_payment_id:null,order_address:i.user_address[0]};console.log(a),n.openOrderSummaryDetail=!1,n.openServiceDetail=!1,null!=a&&a.order_value&&n.categoryDetailService.createOrder(a).subscribe(s=>{console.log(s);let c=i.user_phone.toString();c.startsWith("91")&&(c=c.substring(2)),console.log(c);let l={customer_details:{customer_email:i.user_email,customer_id:a.order_user_id,customer_phone:c},order_amount:a.order_value,order_id:s.order_id,order_currency:"INR",order_meta:{}};try{n.paymnetLoading&&n.paymnetLoading.dismiss()}catch(m){console.error(m)}n.categoryDetailService.createCashfreeOrder(l).subscribe(function(){var m=(0,T.Z)(function*(u){console.log(u);let g=u.payment_session_id;console.log(g);const p=new Cashfree({mode:"sandbox"});let Ue={paymentSessionId:g,returnUrl:P.N.LOGIN_REDIRECT+"/order/payment-status/"+u.order_id};const Ne=new le(g,u.order_id,Z.SANDBOX),Re=new ge(Ne,null),qe={onVerify:v=>{console.log("********* payment response"+{orderID:v.orderID}),console.log("********* payment response"+JSON.stringify(v)),n.router.navigateByUrl("/home/order/payment-status/"+v.orderID,{skipLocationChange:!0,replaceUrl:!0})},onError:v=>{console.log({orderID:u.order_id,status:v.status,code:v.code,type:v.type,message:v.message})}};n.platform.is("android")?(console.log("in android app"+n.platform),L.setCallback(qe),L.doWebCheckoutPayment(Re)):(console.log("in web app payment"),p.checkout(Ue).then(v=>{v.error&&alert(v.error.message),v.redirect&&(console.log("Redirection"),n.router.navigateByUrl("/home/order/payment-status/"+v.order_id,{skipLocationChange:!0,replaceUrl:!0}))}))});return function(u){return m.apply(this,arguments)}}())})}else console.log("error in user data"),n.router.navigate(["/login"])})()}wait(n){return new Promise(i=>setTimeout(i,n))}showLoading(){var n=this;return(0,T.Z)(function*(){n.paymnetLoading=yield n.loadingCtrl.create({message:"Initializing payment..",duration:4e3}),n.paymnetLoading.present()})()}navigateTohome(){this.router.navigate(["/home"])}getUserAddress(n){return new Promise((i,a)=>{this.userService.getUserAddress(n).subscribe(s=>{this.DefaultaddressData=s;let c=this.DefaultaddressData.find(l=>l.default);c?i(c.user_coordinates):a(),console.log(this.DefaultaddressData)},s=>{a(),console.log(s)})})}bookAppointment(n){if(null==this.taxData)return void console.log("unable to fetch tax data");console.log(this.service_data_list);const i=Math.round(100*n.consultation_fees)/100,a=i*this.taxData.Tax/100,s=this.taxData.service_charge;this.before_total=i,this.gst_charge=a+s,this.total=Math.floor(i+a+s),this.totalAmount=i,this.openOrderSummaryDetail=!0}}return(t=o).\u0275fac=function(n){return new(n||t)(e.Y36(d.HT),e.Y36(fe.t4),e.Y36(I.K),e.Y36(b.K),e.Y36(w.F0),e.Y36(w.gz),e.Y36(O.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-category-detail"]],decls:11,vars:10,consts:[["type","indeterminate",4,"ngIf"],["class","location-note",4,"ngIf"],[1,"service-provider-block"],["class","provider-block"],[3,"isOpen","willDismiss"],[3,"isOpen","initialBreakpoint","breakpoints","willDismiss"],[1,"date-bd",3,"keepContentsMounted","showBackdrop"],["type","indeterminate"],[1,"location-note"],["name","location"],["class","provider-block",3,"click",4,"ngFor","ngForOf"],[1,"provider-block",3,"click"],[1,"provider-card"],[1,"provider-detail-block"],[1,"p-image-block"],["slot","start"],["src","../../../assets/icon/category/provider.webp",3,"alt"],[1,"content-block"],[1,"p-name-block"],[1,"p-category-block"],["color","primary"],[1,"rating-container"],["class","total-review-container",4,"ngIf"],[1,"total-review-container"],[1,"no-provider-found-block"],[1,"not-found-container"],[1,"nf-img-container"],["class","nf-text-container",4,"ngIf"],[1,"nf-text-container"],[1,"no-genie-container"],["name","alert-circle-outline",1,"no-genie-icon"],[1,"no-genie-message"],[3,"click"],[1,"provider_title"],[1,"ion-padding"],[1,"service-block"],["class","service-list-container",4,"ngIf"],["class","review-container"],[1,"service-list-container"],[4,"ngFor","ngForOf"],[1,"service-data"],[1,"service-name"],["slot","end",1,"service-rate"],[1,"review-container"],["lines","none",3,"inset"],[1,"review-container-block"],[1,"review-user-detail-slot"],["alt","Silhouette of mountains","src","https://ionicframework.com/docs/img/demos/thumbnail.svg"],[1,"review-u-container"],[1,"review-user-name"],[1,"review-ser-rating"],["name","star",1,"rating-star"],[1,"review-description-slot"],["slot","end"],[3,"strong","click"],[1,"summary-block"],[1,"main-summary-block"],[1,"sum-conatiner"],[1,"order-summary-container"],["class","oder-item-block",4,"ngFor","ngForOf"],[1,"total-container"],["slot","end",1,"total-data"],[1,"schedule-text-block"],["slot","end","datetime","datetime"],[1,"oder-item-block"],[1,"item-name"],["slot","end",1,"order-number-data"],[1,"item-quantity"],[1,"item-multiply"],[1,"item-price"],[1,"item-total"],["id","datetime",3,"showDefaultButtons","value","min","max","ionChange"]],template:function(n,i){1&n&&(e.YNc(0,ve,1,0,"ion-progress-bar",0)(1,he,4,0,"div",1),e.TgZ(2,"div",2),e.YNc(3,ye,1,1,"div",3)(4,xe,4,1),e.qZA(),e.TgZ(5,"ion-modal",4),e.NdJ("willDismiss",function(s){return i.onWillDismiss(s)}),e.YNc(6,Te,14,7,"ng-template"),e.qZA(),e.TgZ(7,"ion-modal",5),e.NdJ("willDismiss",function(s){return i.onWillDismiss(s)}),e.YNc(8,Ze,46,14,"ng-template"),e.qZA(),e.TgZ(9,"ion-modal",6),e.YNc(10,Se,1,4,"ng-template"),e.qZA()),2&n&&(e.Q6J("ngIf","LOADING"==i.providerLoadingStatus),e.xp6(),e.Q6J("ngIf","LOADED"==i.providerLoadingStatus&&i.serviceProviderData.length>0),e.xp6(2),e.um2(3,i.serviceProviderData.length>0?3:4),e.xp6(2),e.Q6J("isOpen",i.openServiceDetail),e.xp6(2),e.Q6J("isOpen",i.openOrderSummaryDetail)("initialBreakpoint",.75)("breakpoints",e.DdM(9,ke)),e.xp6(2),e.Q6J("keepContentsMounted",!0)("showBackdrop",!0))},dependencies:[h.sg,h.O5,d.BJ,d.YG,d.Sm,d.PM,d.FN,d.hM,d.W2,d.x4,d.Mj,d.Gu,d.gu,d.Ie,d.rH,d.Ub,d.Q$,d.q_,d.yh,d.X7,d.Bs,d.wd,d.sr,d.ki,d.QI,h.JJ,h.rS,h.H9],styles:[".provider-detail-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;column-gap:1rem}ion-thumbnail[_ngcontent-%COMP%]{--size: 80px;--border-radius: 14px}.service-provider-block[_ngcontent-%COMP%]{display:grid;align-items:center;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}.content-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.item-counter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.3rem}.ionic-icons[_ngcontent-%COMP%]{height:2rem}.quantity-container[_ngcontent-%COMP%]{width:1rem}.quantity_btn[_ngcontent-%COMP%]{display:grid;grid-template-columns:2rem 2rem 2rem;align-items:center;justify-items:center;align-content:center}.service-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:1rem}.provider_title[_ngcontent-%COMP%]{text-align:center}.review-container[_ngcontent-%COMP%]{display:flex;row-gap:.5rem;flex-direction:column}.no-provider-found-block[_ngcontent-%COMP%], .not-found-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;align-content:center;flex-direction:column}.nf-text-container[_ngcontent-%COMP%]{font-size:large}.schedule-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:row;justify-content:space-around}.order-number-data[_ngcontent-%COMP%]{display:grid;grid-template-columns:3rem 2rem 3rem 4rem;justify-items:center;align-items:center;align-content:center}.total-data[_ngcontent-%COMP%]{padding-right:.5rem}.date-bd[_ngcontent-%COMP%]{--backdrop-opacity:.8 !important}.p-name-block[_ngcontent-%COMP%]{font-size:large;font-weight:700}.rating-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;column-gap:1rem;align-items:center}.provider-card[_ngcontent-%COMP%]{max-width:30rem}.service-data[_ngcontent-%COMP%]{display:flex;align-items:flex-start;flex-direction:column}.service-rate[_ngcontent-%COMP%]{color:gray}.review-container-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;row-gap:1rem;width:100%;background:#e3f2fd;border-radius:.5rem;padding:.5rem;margin:.1rem}.review-user-detail-slot[_ngcontent-%COMP%]{display:flex;flex-direction:row;column-gap:1rem}.review-ser-rating[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.rating-star[_ngcontent-%COMP%]{color:#ffb74d}.location-note[_ngcontent-%COMP%]{background-color:#2e7d32;color:#fff;padding:10px;text-align:center;display:flex;height:2rem;align-items:center;justify-content:center}.location-note[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:5px}.no-genie-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.no-genie-icon[_ngcontent-%COMP%]{font-size:4rem;color:#f44336}.no-genie-message[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-top:1rem;text-align:center}"]}),o})()}]}];let Ie=(()=>{var t;class o{}return(t=o).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[w.Bz.forChild(Oe),w.Bz]}),o})(),Fe=(()=>{var t;class o{}return(t=o).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[h.ez,d.Pc]}),o})();var Me=f(2014);let Be=(()=>{var t;class o{}return(t=o).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[Me.K],imports:[h.ez,Ie,d.Pc,Fe]}),o})()}}]);