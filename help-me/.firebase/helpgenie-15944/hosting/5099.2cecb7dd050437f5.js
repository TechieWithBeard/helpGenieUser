"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5099],{5099:(z,f,c)=>{c.r(f),c.d(f,{OrderPageModule:()=>Q});var p=c(6814),u=c(4091),e=c(9212);let O=(()=>{var t;class i{constructor(){}ngOnInit(){}}return(t=i).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-my-bookings-landing-page"]],decls:1,vars:0,template:function(n,r){1&n&&e._UZ(0,"router-outlet")},dependencies:[u.lC]}),i})();var v=c(5861),s=c(3282),y=c(5971),g=c(553),T=c(4785);let m=(()=>{var t;class i{constructor(n){this.httpClient=n}createHelpRequest(n){return this.httpClient.postWithToken(g.N.Server_URL+"order/help",n)}getOrderTickets(n){return this.httpClient.getWithToken(g.N.Server_URL+"order/getOrderTickets/"+n)}getAllOrderByUserID(n){return this.httpClient.getWithToken(g.N.Server_URL+"getOrder/user/"+n)}getOrderPaymentstatus(n){return console.log("PaymentsuccessComponent getOrderPaymentstatus api: "+n),this.httpClient.getWithToken(g.N.Server_URL+"order/getOrderPaymentStatus/"+n)}getProviderContact(n){return this.httpClient.getWithToken(g.N.Server_URL+"partner/provider-contact/"+n)}}return(t=i).\u0275fac=function(n){return new(n||t)(e.LFG(T.O))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),i})();function Z(t,i){if(1&t&&(e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e._uU(3,"Order Status: "),e.TgZ(4,"span",4)(5,"ion-chip",5),e._uU(6),e.qZA()()(),e.TgZ(7,"ion-card-subtitle"),e._uU(8),e.qZA()(),e.TgZ(9,"ion-card-content")(10,"ion-list")(11,"ion-item")(12,"ion-label"),e._uU(13,"Date"),e.qZA(),e.TgZ(14,"ion-note"),e._uU(15),e.ALo(16,"date"),e.qZA()()(),e.TgZ(17,"ion-item-divider")(18,"ion-label"),e._uU(19,"Total "),e.qZA(),e.TgZ(20,"ion-label",6),e._uU(21),e.ALo(22,"currency"),e.qZA()()()()),2&t){const o=e.oxw();e.xp6(5),e.Q6J("outline",!0),e.xp6(),e.Oqu(o.getStatusLabel(null==o.orderStatus?null:o.orderStatus.order_status)),e.xp6(2),e.hij("Order ID: ",null==o.orderStatus?null:o.orderStatus.order_short_id,""),e.xp6(7),e.Oqu(e.xi3(16,5,null==o.orderStatus?null:o.orderStatus.order_date,"medium")),e.xp6(6),e.Oqu(e.xi3(22,8,o.orderStatus.order_value,"INR"))}}function P(t,i){1&t&&(e.TgZ(0,"ion-list")(1,"ion-list-header"),e._UZ(2,"ion-skeleton-text",7),e.qZA(),e.TgZ(3,"ion-item")(4,"ion-thumbnail",8),e._UZ(5,"ion-skeleton-text",9),e.qZA(),e.TgZ(6,"ion-label")(7,"h3"),e._UZ(8,"ion-skeleton-text",10),e.qZA(),e.TgZ(9,"p"),e._UZ(10,"ion-skeleton-text",11),e.qZA(),e.TgZ(11,"p"),e._UZ(12,"ion-skeleton-text",12),e.qZA()()()()),2&t&&(e.xp6(2),e.Q6J("animated",!0),e.xp6(3),e.Q6J("animated",!0),e.xp6(3),e.Q6J("animated",!0),e.xp6(2),e.Q6J("animated",!0),e.xp6(2),e.Q6J("animated",!0))}function x(t,i){if(1&t&&(e.TgZ(0,"ion-item")(1,"ion-chip",15),e._uU(2),e.qZA(),e.TgZ(3,"ion-label")(4,"p"),e._uU(5),e.qZA()()()),2&t){const o=i.$implicit;e.xp6(2),e.Oqu(o.query_status),e.xp6(3),e.Oqu(o.query_title)}}function S(t,i){if(1&t&&(e.TgZ(0,"div",13)(1,"ion-list")(2,"ion-list-header")(3,"ion-label"),e._uU(4,"Support Tickets"),e.qZA()(),e.YNc(5,x,6,2,"ion-item",14),e.qZA()()),2&t){const o=e.oxw();e.xp6(5),e.Q6J("ngForOf",o.ticketList)}}function A(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"ion-button",16),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.callGenie())}),e._uU(1," Call Genie "),e._UZ(2,"ion-icon",17),e.qZA()}}function M(t,i){if(1&t&&(e.TgZ(0,"div",19)(1,"h2",20),e._uU(2,"Completion OTP"),e.qZA(),e.TgZ(3,"p",21),e._uU(4,"Please provide this OTP to the service provider to mark the service as complete:"),e.qZA(),e.TgZ(5,"h3",22),e._uU(6),e.qZA()()),2&t){const o=e.oxw(2);e.xp6(6),e.Oqu(null==o.orderStatus?null:o.orderStatus.completition_code)}}function U(t,i){1&t&&e._uU(0," unable to fetch OTP ")}function k(t,i){if(1&t&&e.YNc(0,M,7,1,"div",18)(1,U,1,0),2&t){const o=e.oxw();e.um2(0,null!=o.orderStatus&&o.orderStatus.completition_code?0:1)}}var h=function(t){return t.ORDER_PLACED="order placed",t.IN_PROGRESS="in progress",t.COMPLETED="completed",t.CANCELLED="cancelled",t.ORDER_CONFIRMED="order confirmed",t}(h||{});let I=(()=>{var t;class i{constructor(n,r,l,a,C){var d;this.alertController=n,this.route=r,this.categoryService=l,this.router=a,this.orderService=C,this.ticketList=[],this.currentStatus="",this.currentorderStatus=h,this.prividerContact=null,this.orderId=null===(d=this.route)||void 0===d||null===(d=d.snapshot)||void 0===d||null===(d=d.paramMap)||void 0===d?void 0:d.get("orderId"),console.log(this.orderId)}ngOnInit(){this.getOrderDataById()}getServiceProviderContatc(n){this.orderService.getProviderContact(n).subscribe(r=>{r&&(console.log("conact: "+r),this.prividerContact=r)})}getOrderDataById(){this.orderId&&this.categoryService.getOrderStatusById(this.orderId).subscribe(n=>{console.log(n),this.orderStatus=n,this.getServiceProviderContatc(n.order_genie_id),this.orderId&&this.getHelpTickets(this.orderId)})}orderHelp(n){this.router.navigateByUrl("/home/order/help/"+n)}getHelpTickets(n){this.orderService.getOrderTickets(n).subscribe(r=>{r.length>0&&(this.ticketList=[...r])})}callGenie(){window.open("tel:"+this.prividerContact)}getStatusLabel(n){return this.currentorderStatus[n]}presentCompletionAlert(){var n=this;return(0,v.Z)(function*(){var r;yield(yield n.alertController.create({header:"Completion OTP",message:`Please provide this OTP to the service provider to mark the service as complete: ${null===(r=n.orderStatus)||void 0===r?void 0:r.completition_codep}`,inputs:[{name:"rating",type:"number",placeholder:"Rating (1-5)"},{name:"review",type:"text",placeholder:"Review"}],buttons:["OK"]})).present()})()}}return(t=i).\u0275fac=function(n){return new(n||t)(e.Y36(s.Br),e.Y36(u.gz),e.Y36(y.D),e.Y36(u.F0),e.Y36(m))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-order-page"]],decls:9,vars:4,consts:[["class","ticketContainer",4,"ngIf"],[1,"help-conatiner"],[1,"help"],["fill","clear",3,"click"],[1,"chip-text"],[3,"outline"],["slot","end"],[2,"width","80px",3,"animated"],["slot","start"],[3,"animated"],[2,"width","80%",3,"animated"],[2,"width","60%",3,"animated"],[2,"width","30%",3,"animated"],[1,"ticketContainer"],[4,"ngFor","ngForOf"],["slot","end","color","primary"],[3,"click"],["slot","start","name","call"],["class","otp-container"],[1,"otp-container"],[1,"title"],[1,"message"],[1,"otp"]],template:function(n,r){1&n&&(e.YNc(0,Z,23,11,"ion-card")(1,P,13,5)(2,S,6,1,"div",0),e.TgZ(3,"div",1)(4,"div",2)(5,"ion-button",3),e.NdJ("click",function(){return r.orderHelp(r.orderStatus.order_id)}),e._uU(6,"Need Help?"),e.qZA()(),e.YNc(7,A,3,0,"ion-button")(8,k,2,1),e.qZA()),2&n&&(e.um2(0,r.orderStatus?0:1),e.xp6(2),e.Q6J("ngIf",r.ticketList.length>0),e.xp6(5),e.um2(7,r.prividerContact&&"COMPLETED"!=r.orderStatus.order_status?7:-1),e.xp6(),e.um2(8,"COMPLETED"!=r.orderStatus.order_status?8:-1))},dependencies:[p.sg,p.O5,s.YG,s.PM,s.FN,s.Zi,s.tO,s.Dq,s.hM,s.gu,s.Ie,s.rH,s.Q$,s.q_,s.yh,s.uN,s.CK,s.Bs,p.H9,p.uU],styles:[".help-conatiner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:center;justify-content:center;align-items:center;gap:1rem}.otp-container[_ngcontent-%COMP%]{background:#f4f4f4;display:flex;padding:20px;flex-direction:column;align-content:center;justify-content:center;align-items:center}.title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:10px}.message[_ngcontent-%COMP%]{margin-bottom:20px}.otp[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#333}"]}),i})();var q=c(2095);function b(t,i){1&t&&e._UZ(0,"ion-progress-bar",0)}const L=(t,i)=>({"order-status-complete":t,"order-status-pending":i});function B(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"ion-item",3),e.NdJ("click",function(){const l=e.CHM(o).$implicit,a=e.oxw(2);return e.KtG(a.orderClicked(l.order_id))}),e.TgZ(1,"ion-label")(2,"h2"),e._uU(3),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.qZA(),e.TgZ(9,"p"),e._uU(10,"Status: "),e.TgZ(11,"span",4),e._uU(12),e.qZA()()()()}if(2&t){const o=i.$implicit,n=e.oxw(2);e.xp6(3),e.hij("Order #",o.order_short_id,""),e.xp6(2),e.hij("Date: ",e.lcZ(6,5,o.order_date),""),e.xp6(3),e.hij("Total: ",o.order_value,""),e.xp6(3),e.Q6J("ngClass",e.WLB(7,L,"COMPLETED"===o.order_status,"COMPLETED"!==o.order_status)),e.xp6(),e.Oqu(n.getStatusLabel(o.order_status))}}function w(t,i){if(1&t&&(e.TgZ(0,"ion-list",1)(1,"ion-list-header")(2,"ion-label"),e._uU(3," Past Orders"),e.qZA()(),e.YNc(4,B,13,10,"ion-item",2),e.qZA()),2&t){const o=e.oxw();e.xp6(4),e.Q6J("ngForOf",o.orderList)}}function D(t,i){1&t&&(e.TgZ(0,"ion-content",5)(1,"div",6),e._UZ(2,"ion-icon",7),e.TgZ(3,"h2",8),e._uU(4,"No Orders Found"),e.qZA(),e.TgZ(5,"p",9),e._uU(6,"Please check back later for updates."),e.qZA()()())}let N=(()=>{var t;class i{constructor(n,r,l){this.orderService=n,this.storage=r,this.router=l,this.currentorderStatus=h,this.orderList=[],this.loading=!1}ngOnInit(){this.getAppOrder()}getAppOrder(){var n=this;return(0,v.Z)(function*(){n.loading=!0;let r=yield n.storage.get("userDetails");r&&n.orderService.getAllOrderByUserID(r.user_id).subscribe(a=>{a&&(console.log(a),n.loading=!1,n.orderList=[...a.sort((C,d)=>{const j=new Date(C.order_date);return new Date(d.order_date).getTime()-j.getTime()})])})})()}orderClicked(n){this.router.navigateByUrl("/home/order/"+n)}getStatusLabel(n){return this.currentorderStatus[n]}}return(t=i).\u0275fac=function(n){return new(n||t)(e.Y36(m),e.Y36(q.K),e.Y36(u.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-my-bookings-list-page"]],decls:3,vars:2,consts:[["type","indeterminate"],["lines","full"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[3,"ngClass"],[1,"ion-padding"],[1,"no-orders-container"],["name","alert-circle-outline",1,"no-orders-icon"],[1,"no-orders-message"],[1,"no-orders-description"]],template:function(n,r){1&n&&e.YNc(0,b,1,0,"ion-progress-bar",0)(1,w,5,1,"ion-list",1)(2,D,7,0),2&n&&(e.um2(0,r.loading?0:-1),e.xp6(),e.um2(1,r.orderList.length>0?1:r.loading?-1:2))},dependencies:[p.mk,p.sg,s.W2,s.gu,s.Ie,s.Q$,s.q_,s.yh,s.X7,p.uU],styles:[".order-status-complete[_ngcontent-%COMP%]{color:green}.order-status-pending[_ngcontent-%COMP%]{color:orange}.no-orders-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.no-orders-icon[_ngcontent-%COMP%]{font-size:4rem;color:#f53d3d}.no-orders-message[_ngcontent-%COMP%]{margin-top:1rem;font-size:1.5rem}.no-orders-description[_ngcontent-%COMP%]{margin-top:.5rem;font-size:1rem;color:#777}"]}),i})();var _=c(95);let F=(()=>{var t;class i{constructor(n,r,l){var a;this.route=n,this.orderService=r,this.router=l,this.helpTitle="",this.helpDescription="",this.isAlertOpen=!1,this.alertButtons=["OK"],this.orderId=null===(a=this.route)||void 0===a||null===(a=a.snapshot)||void 0===a||null===(a=a.paramMap)||void 0===a?void 0:a.get("orderId")}ngOnInit(){}sendHelp(){null!=this.orderId&&this.orderService.createHelpRequest({order_id:this.orderId,query_title:this.helpTitle,query_description:this.helpDescription}).subscribe(r=>{console.log(r),r&&(this.helpTitle="",this.helpDescription="",this.setOpen(!0))})}setOpen(n){this.isAlertOpen=n,n||this.router.navigateByUrl("/home/order/"+this.orderId)}}return(t=i).\u0275fac=function(n){return new(n||t)(e.Y36(u.gz),e.Y36(m),e.Y36(u.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-order-help"]],decls:14,vars:4,consts:[[1,"help-container"],[1,"help-input-container"],["position","stacked"],["placeholder","Enter title",3,"ngModel","ngModelChange"],["placeholder","Enter description",3,"ngModel","ngModelChange"],[1,"help-action-container"],["expand","full",3,"click"],["header","Query Sent Successfully","message","You will receive a reply soon.",3,"isOpen","buttons","didDismiss"]],template:function(n,r){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"ion-item")(3,"ion-label",2),e._uU(4,"Title"),e.qZA(),e.TgZ(5,"ion-input",3),e.NdJ("ngModelChange",function(a){return r.helpTitle=a}),e.qZA()(),e.TgZ(6,"ion-item")(7,"ion-label",2),e._uU(8,"Description"),e.qZA(),e.TgZ(9,"ion-textarea",4),e.NdJ("ngModelChange",function(a){return r.helpDescription=a}),e.qZA()()(),e.TgZ(10,"div",5)(11,"ion-button",6),e.NdJ("click",function(){return r.sendHelp()}),e._uU(12,"Send"),e.qZA()()(),e.TgZ(13,"ion-alert",7),e.NdJ("didDismiss",function(){return r.setOpen(!1)}),e.qZA()),2&n&&(e.xp6(5),e.Q6J("ngModel",r.helpTitle),e.xp6(4),e.Q6J("ngModel",r.helpDescription),e.xp6(4),e.Q6J("isOpen",r.isAlertOpen)("buttons",r.alertButtons))},dependencies:[s.Ge,s.YG,s.pK,s.Ie,s.Q$,s.g2,s.j9,_.JJ,_.On],styles:[".help-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;justify-content:space-between}"]}),i})();function J(t,i){if(1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),e._uU(3," Payment Success "),e.qZA()()(),e.TgZ(4,"ion-content",1),e._UZ(5,"ion-icon",2),e.TgZ(6,"h2"),e._uU(7,"Payment Successful!"),e.qZA(),e.TgZ(8,"p"),e._uU(9,"Thank you for your purchase."),e.qZA(),e.TgZ(10,"p"),e._uU(11),e.qZA()()),2&t){const o=e.oxw();e.xp6(11),e.hij("Redirecting in ",o.countdown," seconds...")}}function Y(t,i){if(1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",3)(2,"ion-title"),e._uU(3," Payment Failed "),e.qZA()()(),e.TgZ(4,"ion-content",1),e._UZ(5,"ion-icon",4),e.TgZ(6,"h2",5),e._uU(7,"Payment Failed"),e.qZA(),e.TgZ(8,"p")(9,"b"),e._uU(10,"Sorry, your payment was not successful."),e.qZA()(),e.TgZ(11,"p"),e._uU(12),e.qZA(),e.TgZ(13,"p",6)(14,"b"),e._uU(15,"If any amount is debited, it will be refunded in 3-4 working days."),e.qZA()(),e.TgZ(16,"p"),e._uU(17),e.qZA()()),2&t){const o=e.oxw();e.xp6(12),e.hij("Order Id: ",o.orderId,""),e.xp6(5),e.hij("Redirecting in ",o.countdown," seconds...")}}function E(t,i){1&t&&(e.TgZ(0,"div",7),e._UZ(1,"ion-spinner",8),e.qZA())}const H=[{path:"",component:O,children:[{path:"",redirectTo:"bookings",pathMatch:"full"},{path:"payment-status/:orderId",component:(()=>{var t;class i{constructor(n,r,l){var a;this.route=n,this.orderService=r,this.router=l,this.paymentStatus="",this.countdown=5,this.orderId=null===(a=this.route)||void 0===a||null===(a=a.snapshot)||void 0===a||null===(a=a.paramMap)||void 0===a?void 0:a.get("orderId"),console.log("PaymentsuccessComponent this is order id: "+this.orderId)}ngOnInit(){console.log("PaymentsuccessComponent ngOnInit: "+this.orderId)}ngAfterViewInit(){console.log("PaymentsuccessComponent ngAfterViewInit: "+this.orderId),this.getOrderStatus()}getOrderStatus(){this.orderId&&(console.log("PaymentsuccessComponent orderId: "+this.orderId),this.orderService.getOrderPaymentstatus(this.orderId).subscribe(n=>{console.log(n),this.paymentStatus=n,console.log("PaymentsuccessComponent paymentStatus: "+n),this.startTimer(n)},n=>{console.log("PaymentsuccessComponent error: "+JSON.stringify(n))}))}startTimer(n){console.log("startTimer: "+n);const r=setInterval(()=>{this.countdown>0?this.countdown--:(clearInterval(r),this.router.navigate("SUCCESS"==n?["/home/order/"+this.orderId]:["/home"]))},1e3)}redirectToHome(){this.router.navigateByUrl("/home")}}return(t=i).\u0275fac=function(n){return new(n||t)(e.Y36(u.gz),e.Y36(m),e.Y36(u.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-paymentsuccess"]],decls:3,vars:1,consts:[["color","primary"],[1,"ion-text-center","ion-padding"],["name","checkmark-circle-outline","size","large","color","success"],["color","danger"],["name","close-circle-outline","size","large","color","danger"],[2,"color","red"],[2,"color","green"],[1,"loading-container"],["name","circular"]],template:function(n,r){1&n&&e.YNc(0,J,12,1)(1,Y,18,2)(2,E,2,0),2&n&&e.um2(0,"SUCCESS"==r.paymentStatus?0:"FAILED"==r.paymentStatus?1:2)},dependencies:[s.W2,s.Gu,s.gu,s.PQ,s.wd,s.sr],styles:["ion-content[_ngcontent-%COMP%]{--background: #f4f4f4}ion-icon[_ngcontent-%COMP%]{font-size:5rem;margin-bottom:1rem}h2[_ngcontent-%COMP%]{color:#333}p[_ngcontent-%COMP%]{color:#666}.loading-container[_ngcontent-%COMP%]{display:flex;align-self:center;align-items:center;justify-content:center}"]}),i})()},{path:"bookings",component:N},{path:"help/:orderId",component:F},{path:":orderId",component:I}]}];let R=(()=>{var t;class i{}return(t=i).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.Bz.forChild(H),u.Bz]}),i})(),Q=(()=>{var t;class i{}return(t=i).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.ez,s.Pc,_.u5,R]}),i})()}}]);